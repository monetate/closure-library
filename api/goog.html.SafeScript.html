<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>goog.html.SafeScript</title><link href="dossier.css" rel="stylesheet" type="text/css"><script src="types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="dossier-main"><main data-page-data="[null,[[[&quot;goog.html.SafeScript&quot;,null,null,null,[null,238,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L238&quot;]],null,[[[null,&quot;&lt;p&gt;A string-like object which represents JavaScript code and that carries the\nsecurity type contract that its value, as a string, will not cause execution\nof unconstrained attacker controlled code (XSS) when evaluated as JavaScript\nin a browser.&lt;/p&gt;\n&lt;p&gt;Instances of this type must be created via the factory method\n&lt;code&gt;SafeScript.fromConstant&lt;/code&gt; and not by invoking its constructor. The\nconstructor intentionally takes an extra parameter that cannot be constructed\noutside of this file and the type is immutable; hence only a default instance\ncorresponding to the empty string can be obtained via constructor invocation.&lt;/p&gt;\n&lt;p&gt;A SafeScript&amp;#39;s string representation can safely be interpolated as the\ncontent of a script element within HTML. The SafeScript string should not be\nescaped before interpolation.&lt;/p&gt;\n&lt;p&gt;Note that the SafeScript might contain text that is attacker-controlled but\nthat text should have been interpolated with appropriate escaping,\nsanitization and/or validation into the right location in the script, such\nthat it is highly constrained in its effect (for example, it had to match a\nset of whitelisted words).&lt;/p&gt;\n&lt;p&gt;A SafeScript can be constructed via security-reviewed unchecked\nconversions. In this case producers of SafeScript must ensure themselves that\nthe SafeScript does not contain unsafe script. Note in particular that\n&lt;code&gt;&amp;amp;lt;&lt;/code&gt; is dangerous, even when inside JavaScript strings, and so should\nalways be forbidden or JavaScript escaped in user controlled input. For\nexample, if &lt;code&gt;&amp;amp;lt;/script&amp;amp;gt;&amp;amp;lt;script&amp;amp;gt;evil&amp;amp;lt;/script&amp;amp;gt;&amp;#34;&lt;/code&gt; were\ninterpolated inside a JavaScript string, it would break out of the context\nof the original script element and &lt;code&gt;evil&lt;/code&gt; would execute. Also note\nthat within an HTML script (raw text) element, HTML character references,\nsuch as &amp;#34;&amp;lt;&amp;#34; are not allowed. See\nhttp://www.w3.org/TR/html5/scripting-1.html#restrictions-for-contents-of-script-elements.\nCreating SafeScript objects HAS SIDE-EFFECTS due to calling Trusted Types Web\nAPI.&lt;/p&gt;\n&quot;]]],[null,null,null,1,null,1],null,[],null,[[[&quot;createSafeScriptSecurityPrivateDoNotAccessOrElse&quot;,[null,202,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L202&quot;]],[[[null,&quot;&lt;p&gt;Package-internal utility method to create SafeScript instances.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[],null,[[&quot;script&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The string to initialize the SafeScript object with.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;goog.html.SafeScript&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;The initialized SafeScript object.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;fromConstant&quot;,[null,97,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L97&quot;]],[[[null,&quot;&lt;p&gt;Creates a SafeScript object from a compile-time constant string.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;script&quot;,[null,null,null,[&quot;goog.string.Const&quot;,null,[null,null,[null,null,&quot;goog.string.Const.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;A compile-time-constant string from which to create\na SafeScript.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;goog.html.SafeScript&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;A SafeScript object initialized to &lt;code&gt;script&lt;/code&gt;.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;fromJson&quot;,[null,112,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L112&quot;]],[[[null,&quot;&lt;p&gt;Creates a SafeScript JSON representation from anything that could be passed\nto JSON.stringify.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;val&quot;,[null,null,null,null,null,null,1]]],[null,[null,null,null,[&quot;goog.html.SafeScript&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html&quot;]],null,[]]]],[]],[[&quot;unwrap&quot;,[null,152,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L152&quot;]],[[[null,&quot;&lt;p&gt;Performs a runtime check that the provided object is indeed a\nSafeScript object, and returns its value.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;safeScript&quot;,[null,null,null,[&quot;goog.html.SafeScript&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;The object to extract from.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The safeScript object&amp;#39;s contained string, unless\nthe run-time type check fails. In that case, &lt;code&gt;unwrap&lt;/code&gt; returns an\ninnocuous string, or, if assertions are enabled, throws\n&lt;code&gt;asserts.AssertionError&lt;/code&gt;.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;unwrapTrustedScript&quot;,[null,162,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L162&quot;]],[[[null,&quot;&lt;p&gt;Unwraps value as TrustedScript if supported or as a string if not.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[[[[&quot;SafeScript.unwrap&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html#SafeScript.unwrap&quot;]]]]]]],[],null,[[&quot;safeScript&quot;,[null,null,null,[&quot;goog.html.SafeScript&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html&quot;]],null,[]]]]],[null,[null,null,null,null,null,[[[null,null,null,[&quot;TrustedScript&quot;,null,null,null,[]]],[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]]],[]]],[[[&quot;EMPTY&quot;,[null,228,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L228&quot;]],[[[null,&quot;&lt;p&gt;A SafeScript instance corresponding to the empty string.&lt;/p&gt;\n&quot;]]],null,null,[1],null,null,[],[]],[null,null,null,[&quot;goog.html.SafeScript&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html&quot;]],null,[]]]]],[[&quot;SafeScript&quot;,[null,238,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L238&quot;]],[[[null,&quot;&lt;p&gt;A string-like object which represents JavaScript code and that carries the\nsecurity type contract that its value, as a string, will not cause execution\nof unconstrained attacker controlled code (XSS) when evaluated as JavaScript\nin a browser.&lt;/p&gt;\n&lt;p&gt;Instances of this type must be created via the factory method\n&lt;code&gt;SafeScript.fromConstant&lt;/code&gt; and not by invoking its constructor. The\nconstructor intentionally takes an extra parameter that cannot be constructed\noutside of this file and the type is immutable; hence only a default instance\ncorresponding to the empty string can be obtained via constructor invocation.&lt;/p&gt;\n&lt;p&gt;A SafeScript&amp;#39;s string representation can safely be interpolated as the\ncontent of a script element within HTML. The SafeScript string should not be\nescaped before interpolation.&lt;/p&gt;\n&lt;p&gt;Note that the SafeScript might contain text that is attacker-controlled but\nthat text should have been interpolated with appropriate escaping,\nsanitization and/or validation into the right location in the script, such\nthat it is highly constrained in its effect (for example, it had to match a\nset of whitelisted words).&lt;/p&gt;\n&lt;p&gt;A SafeScript can be constructed via security-reviewed unchecked\nconversions. In this case producers of SafeScript must ensure themselves that\nthe SafeScript does not contain unsafe script. Note in particular that\n&lt;code&gt;&amp;amp;lt;&lt;/code&gt; is dangerous, even when inside JavaScript strings, and so should\nalways be forbidden or JavaScript escaped in user controlled input. For\nexample, if &lt;code&gt;&amp;amp;lt;/script&amp;amp;gt;&amp;amp;lt;script&amp;amp;gt;evil&amp;amp;lt;/script&amp;amp;gt;&amp;#34;&lt;/code&gt; were\ninterpolated inside a JavaScript string, it would break out of the context\nof the original script element and &lt;code&gt;evil&lt;/code&gt; would execute. Also note\nthat within an HTML script (raw text) element, HTML character references,\nsuch as &amp;#34;&amp;lt;&amp;#34; are not allowed. See\nhttp://www.w3.org/TR/html5/scripting-1.html#restrictions-for-contents-of-script-elements.\nCreating SafeScript objects HAS SIDE-EFFECTS due to calling Trusted Types Web\nAPI.&lt;/p&gt;\n&quot;]]],null,null,[null,null,null,null,null,1],null,null,[],[[[[&quot;SafeScript#fromConstant&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html#SafeScript.fromConstant&quot;]]]]]]],[],1,[[&quot;arg0&quot;,[null,null,null,null,null,[[[null,null,null,[&quot;TrustedScript&quot;,null,null,null,[]]],[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]]],[&quot;arg1&quot;,[null,null,null,[&quot;Object&quot;,null,null,1,[]]]]],null,[]],[[[&quot;getTypedStringValue&quot;,[null,138,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L138&quot;]],[[[null,&quot;&lt;p&gt;Returns this SafeScript&amp;#39;s value as a string.&lt;/p&gt;\n&lt;p&gt;IMPORTANT: In code where it is security relevant that an object&amp;#39;s type is\nindeed &lt;code&gt;SafeScript&lt;/code&gt;, use &lt;code&gt;SafeScript.unwrap&lt;/code&gt; instead of\nthis method. If in doubt, assume that it&amp;#39;s security relevant. In\nparticular, note that goog.html functions which return a goog.html type do\nnot guarantee the returned instance is of the right type. For example:&lt;/p&gt;\n &lt;pre&gt;\n var fakeSafeHtml &amp;#61; new String(&amp;#39;fake&amp;#39;);\n fakeSafeHtml.__proto__ &amp;#61; goog.html.SafeHtml.prototype;\n var newSafeHtml &amp;#61; goog.html.SafeHtml.htmlEscape(fakeSafeHtml);\n // newSafeHtml is just an alias for fakeSafeHtml, it&amp;#39;s passed through by\n // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml\n // instanceof goog.html.SafeHtml.\n &lt;/pre&gt;\n&quot;]]],null,null,null,null,null,[[&quot;goog.string.TypedString&quot;,null,[null,null,[null,null,&quot;goog.string.TypedString.html#getTypedStringValue&quot;]],null,[]]],[[[[&quot;SafeScript#unwrap&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html#SafeScript.unwrap&quot;]]]]]]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The wrapped string&amp;#39;s value.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;toString&quot;,[null,219,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L219&quot;]],[[[null,&quot;&lt;p&gt;Returns a string-representation of this value.&lt;/p&gt;\n&lt;p&gt;To obtain the actual string value wrapped in a SafeScript, use\n&lt;code&gt;SafeScript.unwrap&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[[[[&quot;SafeScript#unwrap&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html#SafeScript.unwrap&quot;]]]]]]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]]],[]]],[[[&quot;implementsGoogStringTypedString&quot;,[null,87,null,[null,null,&quot;closure/goog/html/safescript.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/html/safescript.js#L87&quot;]],[[[null,&quot;&lt;p&gt;Interface marker of the TypedString interface.&lt;/p&gt;\n&lt;p&gt;This property can be used to determine at runtime whether or not an object\nimplements this interface.  All implementations of this interface set this\nproperty to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,null,[1],null,null,[[&quot;goog.string.TypedString&quot;,null,[null,null,[null,null,&quot;goog.string.TypedString.html#implementsGoogStringTypedString&quot;]],null,[]]],[]],[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]]],null,[],[[&quot;goog.string.TypedString&quot;,null,[null,null,[null,null,&quot;goog.string.TypedString.html&quot;]],null,[]]],[],[[&quot;goog.html.SafeScript&quot;,null,[null,null,[null,null,&quot;goog.html.SafeScript.html&quot;]],null,[]],null,1],null,&quot;goog.html.SafeScript.html&quot;,&quot;goog.html.SafeScript&quot;,[],[],[],[]]]]]"></main><footer><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></footer></div><script src="dossier.js" defer></script>